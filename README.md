# Blog
This is project of my personal blog running on [svedsko.blog](https://svedsko.blog).

Blog is generated by [Pelican](https://blog.getpelican.com) and published on GitHub Pages from repository [knuhol.github.io](https://github.com/knuhol/knuhol.github.io).

## How To Setup Blog Locally

### Prerequisites
* [Homebrew](https://brew.sh)
* [Dropbox](https://www.dropbox.com/install)

### Python And Virtual Environment
Install `pyenv-virtualenv`:

```bash
$ brew install pyenv-virtualenv
```

Update `~/.bash_profile`:

```bash
# automatically load pyenv scripts
eval "$(pyenv init -)"
eval "$(pyenv virtualenv-init -)"

# disable the default venv prompt change
export VIRTUAL_ENV_DISABLE_PROMPT=1

# set locales
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
```

Install Python 2.7.13:

```bash
$ CFLAGS="-I$(brew --prefix openssl)/include -I$(xcrun --show-sdk-path)/usr/include" LDFLAGS="-L$(brew --prefix openssl)/lib" pyenv install 2.7.13
```

Create a new venv and activate it:

```bash
$ source ~/.bash_profile
$ pyenv virtualenv 2.7.13 pelican
$ pyenv activate pelican
```

#### Sources
[https://medium.freecodecamp.org/manage-multiple-python-versions-and-virtual-environments-venv-pyenv-pyvenv-a29fb00c296f](https://medium.freecodecamp.org/manage-multiple-python-versions-and-virtual-environments-venv-pyenv-pyvenv-a29fb00c296f)
[https://github.com/pyenv/pyenv/wiki/common-build-problems](https://github.com/pyenv/pyenv/wiki/common-build-problems)

### Pelican

```bash
# install Pelican
$ pip install pelican==3.7.1
$ pip install markdown
$ pip install bs4

# Pelican kick off
$ git clone git@github.com:knuhol/blog.git
$ cd blog
$ pelican-quickstart # answer whatever, will be overwritten from GitHub repo
$ git reset head --hard

# add theme
$ git clone git@github.com:knuhol/Flex.git ../Flex
$ mkdir themes
$ ln -s ../Flex themes/Flex

# add content
$ ln -s ~/Dropbox/blog content

# add plugins
$ mkdir plugins
$ cd plugins
$ git init
$ git remote add -f origin git@github.com:getpelican/pelican-plugins.git
$ git config core.sparseCheckout true
$ echo -e "post_stats\ni18n_subsites" >> .git/info/sparse-checkout
$ git pull origin master

# add GitHub pages
$ rm -rf output
$ git clone git@github.com:knuhol/knuhol.github.io.git output
```

#### Sources
[https://stackoverflow.com/a/13738951/3780766](https://stackoverflow.com/a/13738951/3780766)

## Generating and Publishing

### Generate
```bash
$ make html
```

### Publish
Go to `output` folder, commit and push it.

## License
MIT
